{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport { formatDate } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../auth-service.service\";\nimport * as i3 from \"../crud.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../snackbar.service\";\nfunction MatchmakerComponent_div_0_div_1_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const team1N_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", team1N_r3);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", team1N_r3.name, \" \");\n  }\n}\nfunction MatchmakerComponent_div_0_div_1_option_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const team2N_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", team2N_r4);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", team2N_r4.name, \" \");\n  }\n}\nfunction MatchmakerComponent_div_0_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 1);\n    i0.ɵɵelement(2, \"div\", 2);\n    i0.ɵɵelementStart(3, \"div\", 3)(4, \"h2\", 4);\n    i0.ɵɵtext(5, \"- Create a new match -\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"div\", 1);\n    i0.ɵɵelement(7, \"div\", 5);\n    i0.ɵɵelementStart(8, \"div\", 6)(9, \"form\", 7)(10, \"div\", 8)(11, \"div\", 9)(12, \"label\", 10);\n    i0.ɵɵtext(13, \"*Team 1:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"select\", 11);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function MatchmakerComponent_div_0_div_1_Template_select_ngModelChange_14_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.team1, $event) || (ctx_r1.team1 = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(15, \"option\", 12);\n    i0.ɵɵtext(16, \"Select a team\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, MatchmakerComponent_div_0_div_1_option_17_Template, 2, 2, \"option\", 13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(18, \"div\", 8)(19, \"div\", 9)(20, \"label\", 10);\n    i0.ɵɵtext(21, \"*Team 2:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"select\", 14);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function MatchmakerComponent_div_0_div_1_Template_select_ngModelChange_22_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.team2, $event) || (ctx_r1.team2 = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(23, \"option\", 12);\n    i0.ɵɵtext(24, \"Select a team\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(25, MatchmakerComponent_div_0_div_1_option_25_Template, 2, 2, \"option\", 13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(26, \"div\", 15)(27, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function MatchmakerComponent_div_0_div_1_Template_button_click_27_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.createMatch());\n    });\n    i0.ɵɵtext(28, \"Start\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(29, \"div\", 5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.matchForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.team1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.tournament.teams);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.team2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.tournament.teams);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.matchForm.invalid);\n  }\n}\nfunction MatchmakerComponent_div_0_div_2_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const team1N_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", team1N_r6);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", team1N_r6.name, \" \");\n  }\n}\nfunction MatchmakerComponent_div_0_div_2_option_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const team2N_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", team2N_r7);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", team2N_r7.name, \" \");\n  }\n}\nfunction MatchmakerComponent_div_0_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 1);\n    i0.ɵɵelement(2, \"div\", 2);\n    i0.ɵɵelementStart(3, \"div\", 3)(4, \"h2\", 4);\n    i0.ɵɵtext(5, \"- Add a new match -\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"div\", 1);\n    i0.ɵɵelement(7, \"div\", 5);\n    i0.ɵɵelementStart(8, \"div\", 6)(9, \"form\", 7)(10, \"div\", 8)(11, \"div\", 9)(12, \"label\", 10);\n    i0.ɵɵtext(13, \"*Team 1:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"select\", 11);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function MatchmakerComponent_div_0_div_2_Template_select_ngModelChange_14_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.team1, $event) || (ctx_r1.team1 = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(15, \"option\", 12);\n    i0.ɵɵtext(16, \"Select a team\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, MatchmakerComponent_div_0_div_2_option_17_Template, 2, 2, \"option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"label\");\n    i0.ɵɵtext(19, \"Score Team 1: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"br\");\n    i0.ɵɵelementStart(21, \"input\", 18);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function MatchmakerComponent_div_0_div_2_Template_input_ngModelChange_21_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.redScore, $event) || (ctx_r1.redScore = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"div\", 8)(23, \"div\", 9)(24, \"label\", 10);\n    i0.ɵɵtext(25, \"*Team 2:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"select\", 14);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function MatchmakerComponent_div_0_div_2_Template_select_ngModelChange_26_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.team2, $event) || (ctx_r1.team2 = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(27, \"option\", 12);\n    i0.ɵɵtext(28, \"Select a team\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(29, MatchmakerComponent_div_0_div_2_option_29_Template, 2, 2, \"option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"label\");\n    i0.ɵɵtext(31, \"Score Team 2: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(32, \"br\");\n    i0.ɵɵelementStart(33, \"input\", 19);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function MatchmakerComponent_div_0_div_2_Template_input_ngModelChange_33_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.blueScore, $event) || (ctx_r1.blueScore = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(34, \"div\", 15)(35, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function MatchmakerComponent_div_0_div_2_Template_button_click_35_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.createMatch());\n    });\n    i0.ɵɵtext(36, \"Add\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(37, \"div\", 5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.matchForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.team1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.tournament.teams);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.redScore);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.team2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.tournament.teams);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.blueScore);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.matchForm.invalid);\n  }\n}\nfunction MatchmakerComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, MatchmakerComponent_div_0_div_1_Template, 30, 6, \"div\", 0)(2, MatchmakerComponent_div_0_div_2_Template, 38, 8, \"div\", 0);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.add == \"false\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.add == \"true\");\n  }\n}\nfunction MatchmakerComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"loading\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class MatchmakerComponent {\n  constructor(fb, auth, crud, route, router, crudService, _snackBar) {\n    this.fb = fb;\n    this.auth = auth;\n    this.crud = crud;\n    this.route = route;\n    this.router = router;\n    this.crudService = crudService;\n    this._snackBar = _snackBar;\n    this.matchControl = new FormControl('', [Validators.required]);\n    this.matchForm = fb.group({\n      blueTeam: ['', Validators.required],\n      redTeam: ['', Validators.required],\n      redS: [0, Validators.required],\n      blueS: [0, Validators.required]\n    });\n  }\n  ngOnInit() {\n    this.route.queryParams.subscribe(params => {\n      this.id = params.id;\n      this.add = params.add;\n    });\n    this.crud.getTournamentDetail(this.id).subscribe(data => {\n      if (data.payload.exists) {\n        let f = {\n          id: data.payload.id,\n          name: data.payload.data()[\"name\"],\n          teams: data.payload.data()[\"teams\"],\n          matches: data.payload.data()[\"matches\"],\n          users: data.payload.data()[\"users\"],\n          type: data.payload.data()[\"type\"],\n          admin: data.payload.data()[\"admin\"]\n        };\n        this.tournament = f;\n      } else {\n        this.router.navigate(['/404']);\n      }\n    });\n    this.redScore = 0;\n    this.blueScore = 0;\n  }\n  createMatch() {\n    if (this.team1.id != this.team2.id) {\n      if (this.add == 'true') {\n        if (this.redScore <= -1 && this.blueScore <= -1) {\n          this._snackBar.show(\"⚠ You cannot select negative score for the match\");\n        } else if (this.redScore == this.blueScore) {\n          this._snackBar.show(\"⚠ You cannot make a match with the same team for all side\");\n        } else {\n          let match = {\n            date: formatDate(new Date(), \"dd MMM yyyy\", 'en'),\n            blueScore: this.blueScore,\n            redScore: this.redScore,\n            redTeamId: this.team1.id,\n            blueTeamId: this.team2.id,\n            finished: this.add == 'true',\n            id: this.team1.id + this.team2.id + formatDate(new Date(), \"ddMMyyyyHHmmss\", 'en')\n          };\n          this.team1.played++;\n          this.team2.played++;\n          this.team1.goalFatti += this.redScore;\n          this.team1.goalSubiti += this.blueScore;\n          this.team2.goalFatti += this.blueScore;\n          this.team2.goalSubiti += this.redScore;\n          if (this.redScore > this.blueScore) {\n            this.team1.win++;\n            this.team2.lost++;\n            this.team1.score += 3;\n          } else {\n            this.team2.win++;\n            this.team1.lost++;\n            this.team2.score += 3;\n          }\n          var team2 = this.tournament.teams.find(t => t.id == this.team2.id);\n          team2 = this.team2;\n          var team1 = this.tournament.teams.find(t => t.id == this.team1.id);\n          team1 = this.team1;\n          this.tournament.matches.push(match);\n          this.crudService.addInfoToTournament(this.tournament).then(resp => {\n            this._snackBar.show('⚽ Match added successfully.');\n          }).catch(error => {\n            this._snackBar.show('⚠️ Error: ' + error);\n          });\n          this.router.navigate(['/tournament'], {\n            queryParams: {\n              id: this.tournament.id\n            }\n          });\n        }\n      } else {\n        let match = {\n          date: formatDate(new Date(), \"dd MMM yyyy\", 'en'),\n          blueScore: this.blueScore,\n          redScore: this.redScore,\n          redTeamId: this.team1.id,\n          blueTeamId: this.team2.id,\n          finished: this.add == 'true',\n          id: this.team1.id + this.team2.id + formatDate(new Date(), \"ddMMyyyyHHmmss\", 'en')\n        };\n        this.tournament.matches.push(match);\n        this.crudService.addInfoToTournament(this.tournament).then(resp => {\n          this._snackBar.show('⚽ Match created successfully.');\n        }).catch(error => {\n          this._snackBar.show('⚠️ Error: ' + error);\n        });\n        this.router.navigate(['/matchmanager'], {\n          queryParams: {\n            tournament: this.tournament.id,\n            match: match.id\n          }\n        });\n      }\n    }\n  }\n  static {\n    this.ɵfac = function MatchmakerComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MatchmakerComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.CrudService), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i3.CrudService), i0.ɵɵdirectiveInject(i5.PopupService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MatchmakerComponent,\n      selectors: [[\"app-matchmaker\"]],\n      decls: 2,\n      vars: 2,\n      consts: [[4, \"ngIf\"], [1, \"row\", \"mt-5\"], [1, \"col-lg-2\", \"col-md-2\", \"col-sm\", \"col-xs\"], [1, \"col-lg-8\", \"col-md-8\", \"col-sm-12\", \"col-xs-12\"], [1, \"text-center\", \"mb-5\"], [1, \"col-lg-2\", \"col-md-2\", \"col-sm-1\", \"d-xs-none\"], [1, \"col-lg-8\", \"col-md-8\", \"col-sm-10\", \"col-xs-12\"], [2, \"width\", \"100%\", 3, \"formGroup\"], [1, \"form-row\", \"justify-content-center\"], [1, \"form-group\", \"col-lg-6\", \"col-md-6\", \"col-sm-12\", \"col-xs-12\"], [\"for\", \"inputAddress\"], [\"formControlName\", \"redTeam\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"disabled\", \"\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"blueTeam\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"text-center\", \"mt-2\", \"mb-5\"], [\"type\", \"submit\", 1, \"btn\", \"btn-dark\", 3, \"click\", \"disabled\"], [3, \"ngValue\"], [\"type\", \"number\", \"formControlName\", \"redS\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"number\", \"formControlName\", \"blueS\", 3, \"ngModelChange\", \"ngModel\"]],\n      template: function MatchmakerComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, MatchmakerComponent_div_0_Template, 3, 2, \"div\", 0)(1, MatchmakerComponent_div_1_Template, 2, 0, \"div\", 0);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", ctx.tournament != null);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.tournament == null);\n        }\n      },\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["FormControl","Validators","formatDate","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","team1N_r3","ɵɵadvance","ɵɵtextInterpolate1","name","team2N_r4","ɵɵelement","ɵɵtwoWayListener","MatchmakerComponent_div_0_div_1_Template_select_ngModelChange_14_listener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵtwoWayBindingSet","team1","ɵɵresetView","ɵɵtemplate","MatchmakerComponent_div_0_div_1_option_17_Template","MatchmakerComponent_div_0_div_1_Template_select_ngModelChange_22_listener","team2","MatchmakerComponent_div_0_div_1_option_25_Template","ɵɵlistener","MatchmakerComponent_div_0_div_1_Template_button_click_27_listener","createMatch","matchForm","ɵɵtwoWayProperty","tournament","teams","invalid","team1N_r6","team2N_r7","MatchmakerComponent_div_0_div_2_Template_select_ngModelChange_14_listener","_r5","MatchmakerComponent_div_0_div_2_option_17_Template","MatchmakerComponent_div_0_div_2_Template_input_ngModelChange_21_listener","redScore","MatchmakerComponent_div_0_div_2_Template_select_ngModelChange_26_listener","MatchmakerComponent_div_0_div_2_option_29_Template","MatchmakerComponent_div_0_div_2_Template_input_ngModelChange_33_listener","blueScore","MatchmakerComponent_div_0_div_2_Template_button_click_35_listener","MatchmakerComponent_div_0_div_1_Template","MatchmakerComponent_div_0_div_2_Template","add","MatchmakerComponent","constructor","fb","auth","crud","route","router","crudService","_snackBar","matchControl","required","group","blueTeam","redTeam","redS","blueS","ngOnInit","queryParams","subscribe","params","id","getTournamentDetail","data","payload","exists","f","matches","users","type","admin","navigate","show","match","date","Date","redTeamId","blueTeamId","finished","played","goalFatti","goalSubiti","win","lost","score","find","t","push","addInfoToTournament","then","resp","catch","error","ɵɵdirectiveInject","i1","FormBuilder","i2","AuthService","i3","CrudService","i4","ActivatedRoute","Router","i5","PopupService","selectors","decls","vars","consts","template","MatchmakerComponent_Template","rf","ctx","MatchmakerComponent_div_0_Template","MatchmakerComponent_div_1_Template"],"sources":["D:\\Documents\\GitHub\\Foosball-Manager#\\src\\app\\matchmaker\\matchmaker.component.ts","D:\\Documents\\GitHub\\Foosball-Manager#\\src\\app\\matchmaker\\matchmaker.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Match } from '../services/matches';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { CrudService } from '../crud.service';\r\nimport { FormGroup, FormControl, Validators, FormBuilder } from '@angular/forms';\r\nimport { MatSnackBar } from '@angular/material';\r\nimport { Tournament } from '../services/tournaments';\r\nimport { Team } from '../services/team';\r\nimport { formatDate } from '@angular/common';\r\nimport { AuthService } from '../auth-service.service';\r\nimport { PopupService } from '../snackbar.service';\r\n\r\n@Component({\r\n  selector: 'app-matchmaker',\r\n  templateUrl: './matchmaker.component.html',\r\n  styleUrls: ['./matchmaker.component.scss']\r\n})\r\nexport class MatchmakerComponent implements OnInit {\r\n  id: string;\r\n  add: string;\r\n\r\n  tournament: Tournament;\r\n  match: Match;\r\n\r\n  team1: Team;\r\n  team2: Team;\r\n\r\n  blueScore: number;\r\n  redScore: number;\r\n\r\n  matchForm: FormGroup;\r\n  matchControl = new FormControl('', [Validators.required]);\r\n\r\n  constructor(private fb: FormBuilder, public auth: AuthService, private crud: CrudService, private route: ActivatedRoute, private router: Router, private crudService: CrudService, private _snackBar: PopupService) {\r\n    this.matchForm = fb.group({\r\n      blueTeam: ['', Validators.required],\r\n      redTeam: ['', Validators.required],\r\n      redS: [0, Validators.required],\r\n      blueS: [0, Validators.required],\r\n    })\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.route.queryParams\r\n      .subscribe(params => {\r\n        this.id = params.id;\r\n        this.add = params.add;\r\n      });\r\n\r\n    this.crud.getTournamentDetail(this.id).subscribe(data => {\r\n      if (data.payload.exists) {\r\n        let f: Tournament = {\r\n          id: data.payload.id,\r\n          name: data.payload.data()[\"name\"],\r\n          teams: data.payload.data()[\"teams\"],\r\n          matches: data.payload.data()[\"matches\"],\r\n          users: data.payload.data()[\"users\"],\r\n          type: data.payload.data()[\"type\"],\r\n          admin: data.payload.data()[\"admin\"]\r\n        };\r\n        this.tournament = f;\r\n      }\r\n      else {\r\n        this.router.navigate(['/404']);\r\n      }\r\n    });\r\n    this.redScore = 0;\r\n    this.blueScore = 0;\r\n  }\r\n\r\n  createMatch() {\r\n    if (this.team1.id != this.team2.id) {\r\n      if (this.add == 'true') {\r\n        if (this.redScore <= -1 && this.blueScore <= -1) {\r\n          this._snackBar.show(\"⚠ You cannot select negative score for the match\");\r\n        }\r\n        else if (this.redScore == this.blueScore) {\r\n          this._snackBar.show(\"⚠ You cannot make a match with the same team for all side\");\r\n        }\r\n        else {\r\n          let match: Match = {\r\n            date: formatDate(new Date(), \"dd MMM yyyy\", 'en'),\r\n            blueScore: this.blueScore,\r\n            redScore: this.redScore,\r\n            redTeamId: this.team1.id,\r\n            blueTeamId: this.team2.id,\r\n            finished: this.add == 'true',\r\n            id: this.team1.id + this.team2.id + formatDate(new Date(), \"ddMMyyyyHHmmss\", 'en'),\r\n          }\r\n\r\n          this.team1.played++;\r\n          this.team2.played++;\r\n\r\n          this.team1.goalFatti += this.redScore;\r\n          this.team1.goalSubiti += this.blueScore;\r\n\r\n          this.team2.goalFatti += this.blueScore;\r\n          this.team2.goalSubiti += this.redScore;\r\n          \r\n          if (this.redScore > this.blueScore) {\r\n            this.team1.win++;\r\n            this.team2.lost++;\r\n            this.team1.score += 3;\r\n          }\r\n          else {\r\n            this.team2.win++;\r\n            this.team1.lost++;\r\n            this.team2.score += 3;\r\n          }\r\n\r\n          var team2 = this.tournament.teams.find(t => t.id == this.team2.id);\r\n          team2 = this.team2;\r\n          var team1 = this.tournament.teams.find(t => t.id == this.team1.id);\r\n          team1 = this.team1;\r\n          this.tournament.matches.push(match);\r\n          this.crudService.addInfoToTournament(this.tournament).then(resp => {\r\n            this._snackBar.show('⚽ Match added successfully.');\r\n          }).catch(error => {\r\n            this._snackBar.show('⚠️ Error: ' + error);\r\n          });\r\n          this.router.navigate(['/tournament'], { queryParams: { id: this.tournament.id } })\r\n        }\r\n      }\r\n      else {\r\n        let match: Match = {\r\n          date: formatDate(new Date(), \"dd MMM yyyy\", 'en'),\r\n          blueScore: this.blueScore,\r\n          redScore: this.redScore,\r\n          redTeamId: this.team1.id,\r\n          blueTeamId: this.team2.id,\r\n          finished: this.add == 'true',\r\n          id: this.team1.id + this.team2.id + formatDate(new Date(), \"ddMMyyyyHHmmss\", 'en'),\r\n        }\r\n        this.tournament.matches.push(match);\r\n\r\n        this.crudService.addInfoToTournament(this.tournament).then(resp => {\r\n          this._snackBar.show('⚽ Match created successfully.');\r\n        }).catch(error => {\r\n          this._snackBar.show('⚠️ Error: ' + error);\r\n        });\r\n        this.router.navigate(['/matchmanager'], { queryParams: { tournament: this.tournament.id, match: match.id } });\r\n      }\r\n    }\r\n  }\r\n}","<div *ngIf=\"tournament != null\">\r\n    <!-- CREATE A MATCH -->\r\n    <div *ngIf=\"add == 'false'\">\r\n        <div class=\"row mt-5\">\r\n            <div class=\"col-lg-2 col-md-2 col-sm col-xs\">\r\n            </div>\r\n            <div class=\"col-lg-8 col-md-8 col-sm-12 col-xs-12\">\r\n                <h2 class=\"text-center mb-5\">- Create a new match -</h2>\r\n            </div>\r\n        </div>\r\n        <div class=\"row mt-5\">\r\n            <div class=\"col-lg-2 col-md-2 col-sm-1 d-xs-none\">\r\n            </div>\r\n            <div class=\"col-lg-8 col-md-8 col-sm-10 col-xs-12\">\r\n                <form [formGroup]=\"matchForm\" style=\"width:100%;\">\r\n                    <div class=\"form-row justify-content-center\">\r\n\r\n                        <div class=\"form-group col-lg-6 col-md-6 col-sm-12 col-xs-12\">\r\n                            <label for=\"inputAddress\">*Team 1:</label>\r\n                            <select formControlName=\"redTeam\" class=\"form-control\" [(ngModel)]=\"team1\">\r\n                                <option disabled>Select a team</option>\r\n                                <option *ngFor=\"let team1N of tournament.teams\" [ngValue]=\"team1N\">{{team1N.name}}\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-row justify-content-center\">\r\n                        <div class=\"form-group col-lg-6 col-md-6 col-sm-12 col-xs-12\">\r\n                            <label for=\"inputAddress\">*Team 2:</label>\r\n                            <select formControlName=\"blueTeam\" class=\"form-control\" [(ngModel)]=\"team2\">\r\n                                <option disabled>Select a team</option>\r\n                                <option *ngFor=\"let team2N of tournament.teams\" [ngValue]=\"team2N\">{{team2N.name}}\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"text-center mt-2 mb-5\">\r\n                        <button type=\"submit\" class=\"btn btn-dark\" [disabled]=\"matchForm.invalid\"\r\n                            (click)=\"createMatch()\">Start</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            <div class=\"col-lg-2 col-md-2 col-sm-1 d-xs-none\">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- ADD A MATCH -->\r\n    <div *ngIf=\"add == 'true'\">\r\n        <div class=\"row mt-5\">\r\n            <div class=\"col-lg-2 col-md-2 col-sm col-xs\">\r\n            </div>\r\n            <div class=\"col-lg-8 col-md-8 col-sm-12 col-xs-12\">\r\n                <h2 class=\"text-center mb-5\">- Add a new match -</h2>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"row mt-5\">\r\n            <div class=\"col-lg-2 col-md-2 col-sm-1 d-xs-none\">\r\n            </div>\r\n\r\n            <div class=\"col-lg-8 col-md-8 col-sm-10 col-xs-12\">\r\n                <form [formGroup]=\"matchForm\" style=\"width:100%;\">\r\n                    <div class=\"form-row justify-content-center\">\r\n\r\n                        <div class=\"form-group col-lg-6 col-md-6 col-sm-12 col-xs-12\">\r\n                            <label for=\"inputAddress\">*Team 1:</label>\r\n                            <select formControlName=\"redTeam\" class=\"form-control\" [(ngModel)]=\"team1\">\r\n                                <option disabled>Select a team</option>\r\n                                <option *ngFor=\"let team1N of tournament.teams\" [ngValue]=\"team1N\">{{team1N.name}}\r\n                                </option>\r\n                            </select>\r\n                            <label>Score Team 1: </label><br>\r\n                            <input type=\"number\" formControlName=\"redS\" [(ngModel)]=\"redScore\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-row justify-content-center\">\r\n                        <div class=\"form-group col-lg-6 col-md-6 col-sm-12 col-xs-12\">\r\n                            <label for=\"inputAddress\">*Team 2:</label>\r\n                            <select formControlName=\"blueTeam\" class=\"form-control\" [(ngModel)]=\"team2\">\r\n                                <option disabled>Select a team</option>\r\n                                <option *ngFor=\"let team2N of tournament.teams\" [ngValue]=\"team2N\">{{team2N.name}}\r\n                                </option>\r\n                            </select>\r\n                            <label>Score Team 2: </label><br>\r\n                            <input type=\"number\" formControlName=\"blueS\" [(ngModel)]=\"blueScore\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"text-center mt-2 mb-5\">\r\n                        <button type=\"submit\" class=\"btn btn-dark\" [disabled]=\"matchForm.invalid\"\r\n                            (click)=\"createMatch()\">Add</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n\r\n            <div class=\"col-lg-2 col-md-2 col-sm-1 d-xs-none\">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div *ngIf=\"tournament == null\">\r\n    <loading></loading>\r\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}